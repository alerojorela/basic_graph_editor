<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="author" content="Alejandro Rojo">
  <title>Editor de Grafos Dirigidos</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>

  <div id="toolbar">
    <button id="themeToggle" title="Change theme">‚òÄÔ∏è</button>
    <button id="newBtn" title="New graph">New</button>
    <button id="saveBtn">Save</button>
    <input type="file" id="loadInput" accept=".json">

    <button id="newLayout" title="New layout">New layout</button>



    <button id="exampleBtn" title="Show example">Example</button>
    <!-- Help icon -->
    <div class="tooltip">‚ùì
      <span class="tooltiptext">
        F2: Rename node or edge<br>
        F3: Change type of node or edge<br>
        F4: Toggle lock on node or edge<br>
        Delete / Supr: Delete selected (if not locked)<br>
        Right-click: Create node/edge<br>
        Left-click: Select node/edge<br>
        Middle-button + drag: Pan / move view<br>
        Mouse wheel: Zoom
      </span>
    </div>
  </div>


  <canvas id="canvas"></canvas>

  <script src="graphEditor.js"></script>
  <script src="layout.js"></script>
  <script src="https://unpkg.com/dagre@0.7.4/dist/dagre.js"></script>


  <script>
    window.addEventListener('beforeunload', function (event) {
      event.preventDefault();
      event.returnValue = 'Are you sure you want to discard the current graph?'; // Mensaje en algunos navegadores
      return 'Are you sure you want to discard the current graph?';
    });

    const themeToggle = document.getElementById("themeToggle");
    themeToggle.addEventListener("click", () => {
      document.documentElement.classList.toggle("light");
      // themeToggle.textContent = document.documentElement.classList.contains("light") ? "‚òÄÔ∏è" : "üåô";
      themeToggle.textContent = document.documentElement.classList.contains("light") ? "üåô" : "‚òÄÔ∏è";
    });

    document.getElementById("newBtn").onclick = () => {
      if (!isEmptyGraph() && !confirm("Are you sure you want to discard the current graph?")) return;
      newGraph();
    };

    document.getElementById("saveBtn").onclick = () => {
      saveGraph();
    };


    document.getElementById("newLayout").onclick = () => {
      console.log("newLayout");
      // style = "vertical";
      // style = "horizontal";
      // style = "compact";
      style = "wide";
      // style = "inverted";
      applyDagreLayout(nodes, edges, style);
      draw();
    };


    document.getElementById("exampleBtn").onclick = () => {
      if (!isEmptyGraph() && !confirm("Are you sure you want to discard the current graph?")) return;
      loadExampleGraph();
    };

    document.getElementById("loadInput").onchange = e => {
      if (!isEmptyGraph() && !confirm("Are you sure you want to discard the current graph?")) return;
      loadGraph(e);
    };


  </script>

</body>

</html>